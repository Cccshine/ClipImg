!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CImage",[],t):"object"==typeof exports?exports.CImage=t():e.CImage=t()}(window,function(){return function(e){var t=window.webpackHotUpdateCImage;window.webpackHotUpdateCImage=function(e,i){!function(e,t){if(!b[e]||!y[e])return;for(var i in y[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(u[i]=t[i]);0==--v&&0===g&&S()}(e,i),t&&t(e,i)};var i,o=!0,s="ae17f2a52a52e550ca72",n=1e4,a={},r=[],l=[];function h(e){var t=B[e];if(!t)return E;var o=function(o){return t.hot.active?(B[o]?-1===B[o].parents.indexOf(e)&&B[o].parents.push(e):(r=[e],i=o),-1===t.children.indexOf(o)&&t.children.push(o)):(console.warn("[HMR] unexpected require("+o+") from disposed module "+e),r=[]),E(o)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return E[e]},set:function(t){E[e]=t}}};for(var n in E)Object.prototype.hasOwnProperty.call(E,n)&&"e"!==n&&Object.defineProperty(o,n,s(n));return o.e=function(e){return"ready"===d&&p("prepare"),g++,E.e(e).then(t,function(e){throw t(),e});function t(){g--,"prepare"===d&&(w[e]||x(e),0===g&&0===v&&S())}},o}var c=[],d="idle";function p(e){d=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var f,u,m,v=0,g=0,w={},y={},b={};function X(e){return+e+""===e?+e:e}function Y(e){if("idle"!==d)throw new Error("check() is only allowed in idle status");return o=e,p("check"),(t=n,t=t||1e4,new Promise(function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var o=new XMLHttpRequest,n=E.p+""+s+".hot-update.json";o.open("GET",n,!0),o.timeout=t,o.send(null)}catch(e){return i(e)}o.onreadystatechange=function(){if(4===o.readyState)if(0===o.status)i(new Error("Manifest request to "+n+" timed out."));else if(404===o.status)e();else if(200!==o.status&&304!==o.status)i(new Error("Manifest request to "+n+" failed."));else{try{var t=JSON.parse(o.responseText)}catch(e){return void i(e)}e(t)}}})).then(function(e){if(!e)return p("idle"),null;y={},w={},b=e.c,m=e.h,p("prepare");var t=new Promise(function(e,t){f={resolve:e,reject:t}});u={};return x(0),"prepare"===d&&0===g&&0===v&&S(),t});var t}function x(e){b[e]?(y[e]=!0,v++,function(e){var t=document.getElementsByTagName("head")[0],i=document.createElement("script");i.charset="utf-8",i.src=E.p+""+e+"."+s+".hot-update.js",t.appendChild(i)}(e)):w[e]=!0}function S(){p("ready");var e=f;if(f=null,e)if(o)Promise.resolve().then(function(){return z(o)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&t.push(X(i));e.resolve(t)}}function z(t){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var i,o,n,l,h;function c(e){for(var t=[e],i={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var s=o.pop(),n=s.id,a=s.chain;if((l=B[n])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:n};if(l.hot._main)return{type:"unaccepted",chain:a,moduleId:n};for(var r=0;r<l.parents.length;r++){var h=l.parents[r],c=B[h];if(c){if(c.hot._declinedDependencies[n])return{type:"declined",chain:a.concat([h]),moduleId:n,parentId:h};-1===t.indexOf(h)&&(c.hot._acceptedDependencies[n]?(i[h]||(i[h]=[]),f(i[h],[n])):(delete i[h],t.push(h),o.push({chain:a.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function f(e,t){for(var i=0;i<t.length;i++){var o=t[i];-1===e.indexOf(o)&&e.push(o)}}t=t||{};var v={},g=[],w={},y=function(){console.warn("[HMR] unexpected require("+x.moduleId+") to disposed module")};for(var Y in u)if(Object.prototype.hasOwnProperty.call(u,Y)){var x;h=X(Y);var S=!1,z=!1,k=!1,P="";switch((x=u[Y]?c(h):{type:"disposed",moduleId:Y}).chain&&(P="\nUpdate propagation: "+x.chain.join(" -> ")),x.type){case"self-declined":t.onDeclined&&t.onDeclined(x),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+x.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(x),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+x.moduleId+" in "+x.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(x),t.ignoreUnaccepted||(S=new Error("Aborted because "+h+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(x),z=!0;break;case"disposed":t.onDisposed&&t.onDisposed(x),k=!0;break;default:throw new Error("Unexception type "+x.type)}if(S)return p("abort"),Promise.reject(S);if(z)for(h in w[h]=u[h],f(g,x.outdatedModules),x.outdatedDependencies)Object.prototype.hasOwnProperty.call(x.outdatedDependencies,h)&&(v[h]||(v[h]=[]),f(v[h],x.outdatedDependencies[h]));k&&(f(g,[x.moduleId]),w[h]=y)}var H,O=[];for(o=0;o<g.length;o++)h=g[o],B[h]&&B[h].hot._selfAccepted&&O.push({module:h,errorHandler:B[h].hot._selfAccepted});p("dispose"),Object.keys(b).forEach(function(e){!1===b[e]&&function(e){delete installedChunks[e]}(e)});for(var M,C,L=g.slice();L.length>0;)if(h=L.pop(),l=B[h]){var j={},R=l.hot._disposeHandlers;for(n=0;n<R.length;n++)(i=R[n])(j);for(a[h]=j,l.hot.active=!1,delete B[h],delete v[h],n=0;n<l.children.length;n++){var _=B[l.children[n]];_&&((H=_.parents.indexOf(h))>=0&&_.parents.splice(H,1))}}for(h in v)if(Object.prototype.hasOwnProperty.call(v,h)&&(l=B[h]))for(C=v[h],n=0;n<C.length;n++)M=C[n],(H=l.children.indexOf(M))>=0&&l.children.splice(H,1);for(h in p("apply"),s=m,w)Object.prototype.hasOwnProperty.call(w,h)&&(e[h]=w[h]);var D=null;for(h in v)if(Object.prototype.hasOwnProperty.call(v,h)&&(l=B[h])){C=v[h];var I=[];for(o=0;o<C.length;o++)if(M=C[o],i=l.hot._acceptedDependencies[M]){if(-1!==I.indexOf(i))continue;I.push(i)}for(o=0;o<I.length;o++){i=I[o];try{i(C)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:h,dependencyId:C[o],error:e}),t.ignoreErrored||D||(D=e)}}}for(o=0;o<O.length;o++){var N=O[o];h=N.module,r=[h];try{E(h)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(i){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:h,error:i,originalError:e}),t.ignoreErrored||D||(D=i),D||(D=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:h,error:e}),t.ignoreErrored||D||(D=e)}}return D?(p("fail"),Promise.reject(D)):(p("idle"),new Promise(function(e){e(g)}))}var B={};function E(t){if(B[t])return B[t].exports;var o=B[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==e,active:!0,accept:function(e,i){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var o=0;o<e.length;o++)t._acceptedDependencies[e[o]]=i||function(){};else t._acceptedDependencies[e]=i||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var i=0;i<e.length;i++)t._declinedDependencies[e[i]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var i=t._disposeHandlers.indexOf(e);i>=0&&t._disposeHandlers.splice(i,1)},check:Y,apply:z,status:function(e){if(!e)return d;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:a[e]};return i=void 0,t}(t),parents:(l=r,r=[],l),children:[]};return e[t].call(o.exports,o,o.exports,h(t)),o.l=!0,o.exports}return E.m=e,E.c=B,E.d=function(e,t,i){E.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},E.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},E.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return E.d(t,"a",t),t},E.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},E.p="/dist/",E.h=function(){return s},h(0)(E.s=0)}({0:function(e,t,i){"use strict";var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();i(5);var s=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isMobile=/mobile/i.test(window.navigator.userAgent),this.isMobile&&console.log("Mobile");var o={element:document.getElementById("cimage"),allowNewSelect:!0,allowMove:!0,allowResize:!0,bgColor:"#000",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handleSize:5,aspectRatio:null,hasPreview:!0,previewSize:[200],createHandles:["n","e","s","w","ne","se","sw","nw"],createBorders:["n","e","s","w"],drawBorders:!0,minSize:[0,0],maxSize:[0,0],onChange:function(){},onSelect:function(){},onRelease:function(){}};for(var s in o)o.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=o[s]);this.options=t,this.disable=!1,this.parentElement=this.options.element.parentNode,this.eleOriginId=this.options.element.getAttribute("id"),this.eleOriginHTML=this.options.element.outerHTML;var n='<div class="cimage-main">\n\t\t\t\t\t\t\t'+this.eleOriginHTML+'\n\t\t\t\t\t\t\t<div class="cimage-box" style="z-index:100;">\n\t\t\t\t\t\t\t    <div class="cimage-border" style="z-index:-1;"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t    <div class="cimage-handle"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="cimage-shadow"></div>\n\t\t\t\t\t\t\t<div class="cimage-shadow"></div>\n\t\t\t\t\t\t\t<div class="cimage-shadow"></div>\n\t\t\t\t\t\t\t<div class="cimage-shadow"></div>\n\t\t\t\t\t\t</div>';if(this.options.hasPreview&&this.options.aspectRatio)for(var a=0;a<this.options.previewSize.length;a++)n+='<div class="cimage-preview-box">\n\t\t\t\t\t\t\t <img class="cimage-preview" src="" alt="preview">\n\t\t\t\t\t\t   </div>';this.options.element.outerHTML=n,this.options.element=document.getElementById(this.eleOriginId),this.wrapElement=this.options.element.parentNode,this.clipBox=this.wrapElement.getElementsByClassName("cimage-box")[0],this.previewBoxs=document.getElementsByClassName("cimage-preview-box"),this.previews=document.getElementsByClassName("cimage-preview"),this.setPos(this.wrapElement,{width:this.options.element.offsetWidth,height:this.options.element.offsetHeight}),this.setReset();var r=function(e,t,o,s,n,a,r){return function(l){var h={X:l.clientX-e.X,Y:l.clientY-e.Y},c=!!s&&!(Math.abs(h.X)/Math.abs(h.Y)<s),d={X:s?n?a.X:c?Math.abs(h.X):Math.abs(h.Y)*s:Math.abs(h.X),Y:s?n?a.Y:c?Math.abs(h.X)/s:Math.abs(h.Y):Math.abs(h.Y)};i.options.maxSize[0]&&d.X>i.options.maxSize[0]&&(d.X=i.options.maxSize[0],s&&(d.Y=d.X/s)),i.options.maxSize[1]&&d.Y>i.options.maxSize[1]&&(d.Y=i.options.maxSize[1],s&&(d.X=d.Y*s));var p={X:h.X>0?o.X+d.X:o.X-d.X,Y:h.Y>0?o.Y+d.Y:o.Y-d.Y};0<p.X&&p.X<t.width&&0<p.Y&&p.Y<t.height&&(n=!!s&&null,r=[]),p.Y<0&&(r.includes("top")||r.push("top")),p.X>t.width&&(r.includes("right")||r.push("right")),p.X<0&&(r.includes("left")||r.push("left")),p.Y>t.height&&(r.includes("bottom")||r.push("bottom"));for(var f=0;f<r.length;f++)switch(r[f]){case"top":d.Y=o.Y,p.Y=0,s&&(d.X=d.Y*s,n=!0);break;case"right":d.X=t.width-o.X,s&&(d.Y=d.X/s,n=!0);break;case"bottom":d.Y=t.height-o.Y,s&&(d.X=d.Y*s,n=!0);break;case"left":d.X=o.X,p.X=0,s&&(d.Y=d.X/s,n=!0)}a={X:d.X,Y:d.Y},Math.abs(h.X)<d.X&&Math.abs(h.Y)<d.Y&&(n=!!s&&null,r=[]),i.setPos(i.clipBox,{left:h.X>0?o.X:p.X,width:d.X}),i.setPos(i.clipBox,{top:h.Y>0?o.Y:p.Y,height:d.Y}),i.setBorders(),i.setShadows(),i.setPreview(),l.preventDefault(),i.options.onChange&&i.options.onChange()}};this.options.element.onmousedown=function(e){if(!i.disable){var t={X:e.clientX,Y:e.clientY},o=i.options.element.getBoundingClientRect(),s={width:o.width,height:o.height,left:o.left,top:o.top},n={X:t.X-s.left,Y:t.Y-s.top},a=i.options.aspectRatio,l=r(t,s,n,a,null,null,[]);document.addEventListener("mousemove",l,!1);var h=i;document.addEventListener("mouseup",function e(){h.clipBox.offsetWidth>0&&h.clipBox.offsetHeight>0&&(h.options.minSize[0]&&h.clipBox.offsetWidth<h.options.minSize[0]||h.options.minSize[1]&&h.clipBox.offsetHeight<h.options.minSize[1]?(h.setReset(),h.options.onRelease&&h.options.onRelease()):(h.setHandles(),h.isFunction(h.options.onSelect)&&h.options.onSelect())),document.removeEventListener("mousemove",l,!1),document.removeEventListener("mouseup",e,!1)},!1)}};this.clipBox.addEventListener("mousedown",function(e){if(!i.disable&&i.options.allowMove&&!e.target.className.includes("cimage-handle")){var t=function(e){return function(t){var o=t.clientX-e.X,s=t.clientY-e.Y;o<=0?o=0:o>=i.options.element.offsetWidth-i.clipBox.offsetWidth&&(o=i.options.element.offsetWidth-i.clipBox.offsetWidth),s<=0?s=0:s>=i.options.element.offsetHeight-i.clipBox.offsetHeight&&(s=i.options.element.offsetHeight-i.clipBox.offsetHeight),i.setPos(i.clipBox,{left:o,top:s}),i.setShadows(),i.setPreview(),t.preventDefault(),i.options.onChange&&i.options.onChange()}}({X:e.clientX-i.clipBox.offsetLeft,Y:e.clientY-i.clipBox.offsetTop});document.addEventListener("mousemove",t,!1);document.addEventListener("mouseup",function e(){document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",e,!1)},!1)}},!1);this.clipBox.addEventListener("mousedown",function(e){if(i.disable||!i.options.allowResize||!e.target.className.includes("cimage-handle"))return!1;var t={X:e.clientX,Y:e.clientY},o={X:0,Y:0},s=i.getStyle(e.target,"cursor"),n=i.options.aspectRatio,a=i.options.element.getBoundingClientRect(),r={width:a.width,height:a.height,left:a.left,top:a.top},l={width:i.clipBox.offsetWidth,height:i.clipBox.offsetHeight,left:i.clipBox.offsetLeft,top:i.clipBox.offsetTop};switch(s){case"nw-resize":t={X:e.clientX+l.width,Y:e.clientY+l.height},o={X:l.left+l.width,Y:l.top+l.height};break;case"ne-resize":t={X:e.clientX-l.width,Y:e.clientY+l.height},o={X:l.left,Y:l.top+l.height};break;case"sw-resize":t={X:e.clientX+l.width,Y:e.clientY-l.height},o={X:l.left+l.width,Y:l.top};break;case"se-resize":t={X:e.clientX-l.width,Y:e.clientY-l.height},o={X:l.left,Y:l.top};break;case"n-resize":t={X:e.clientX-l.width/2,Y:e.clientY+l.height},o={X:l.left,Y:l.top+l.height};break;case"e-resize":t={X:e.clientX-l.width,Y:e.clientY-l.height/2},o={X:l.left,Y:l.top};break;case"s-resize":t={X:e.clientX-l.width/2,Y:e.clientY-l.height},o={X:l.left,Y:l.top};break;case"w-resize":t={X:e.clientX+l.width,Y:e.clientY-l.height/2},o={X:l.left+l.width,Y:l.top};break;default:t={X:e.clientX,Y:e.clientY},o={X:l.left,Y:l.top}}var h=function(e,t,o,s,n,a,r,l,h){return function(c){var d={X:c.clientX-e.X,Y:c.clientY-e.Y},p=null,f=null;o.match(/nw|sw|se|ne/)?(p=!(!s||Math.abs(d.X)/Math.abs(d.Y)<s),f={X:s?r?l.X:p?Math.abs(d.X):Math.abs(d.Y)*s:Math.abs(d.X),Y:s?r?l.Y:p?Math.abs(d.X)/s:Math.abs(d.Y):Math.abs(d.Y)}):(p=!!s&&("w-resize"==o||"e-resize"==o),f={X:r?l.X:p?Math.abs(d.X):s?Math.abs(d.Y)*s:t.width,Y:r?l.Y:p?s?Math.abs(d.X)/s:t.height:Math.abs(d.Y)}),i.options.minSize[0]&&f.X<i.options.minSize[0]&&(f.X=i.options.minSize[0],s&&(f.Y=f.X/s)),i.options.minSize[1]&&f.Y<i.options.minSize[1]&&(f.Y=i.options.minSize[1],s&&(f.X=f.Y*s),i.options.minSize[0]&&f.X<i.options.minSize[0]&&(f.X=i.options.minSize[0],s&&(f.Y=f.X/s))),i.options.maxSize[0]&&f.X>i.options.maxSize[0]&&(f.X=i.options.maxSize[0],s&&(f.Y=f.X/s)),i.options.maxSize[1]&&f.Y>i.options.maxSize[1]&&(f.Y=i.options.maxSize[1],s&&(f.X=f.Y*s),i.options.maxSize[0]&&f.X>i.options.maxSize[0]&&(f.X=i.options.maxSize[0],s&&(f.Y=f.X/s)));var u={X:d.X>0?n.X+f.X:n.X-f.X,Y:d.Y>0?n.Y+f.Y:n.Y-f.Y};0<u.X&&u.X<a.width&&0<u.Y&&u.Y<a.height&&(r=!!s&&null,h=[]),u.Y<0&&(h.includes("top")||h.push("top")),u.X>a.width&&(h.includes("right")||h.push("right")),u.X<0&&(h.includes("left")||h.push("left")),u.Y>a.height&&(h.includes("bottom")||h.push("bottom"));for(var m=0;m<h.length;m++)switch(h[m]){case"top":f.Y=n.Y,u.Y=0,s&&(f.X=f.Y*s,r=!0);break;case"right":f.X=a.width-n.X,s&&(f.Y=f.X/s,r=!0);break;case"bottom":f.Y=a.height-n.Y,s&&(f.X=f.Y*s,r=!0);break;case"left":f.X=n.X,u.X=0,s&&(f.Y=f.X/s,r=!0)}l={X:f.X,Y:f.Y},Math.abs(d.X)<f.X&&Math.abs(d.Y)<f.Y&&(r=!!s&&null,h=[]),i.setPos(i.clipBox,{left:d.X>0?n.X:u.X,width:f.X}),i.setPos(i.clipBox,{top:d.Y>0?n.Y:u.Y,height:f.Y}),i.setBorders(),i.setHandles(),i.setShadows(),i.setPreview(),c.preventDefault(),i.options.onChange&&i.options.onChange()}}(t,l,s,n,o,r,null,{top:0,left:0,width:0,height:0},[]);document.addEventListener("mousemove",h,!1);var c=i;document.addEventListener("mouseup",function e(){c.setHandles(),document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",e,!1)},!1)},!1);for(var l=this.wrapElement.getElementsByClassName("cimage-shadow"),h=0;h<l.length;h++)l[h].onmousedown=function(e){if(!i.disable&&i.options.allowNewSelect){var t=i.options.element.getBoundingClientRect(),o={width:t.width,height:t.height,left:t.left,top:t.top};i.setReset(),l[0].style.display="block",i.setPos(l[0],{width:o.width,height:o.height,top:0,left:0});var s={X:e.clientX,Y:e.clientY},n={X:s.X-o.left,Y:s.Y-o.top},a=i.options.aspectRatio,h=r(s,o,n,a,null,null,[]);document.addEventListener("mousemove",h,!1);var c=i;document.addEventListener("mouseup",function e(){c.clipBox.offsetWidth<=0&&c.clipBox.offsetHeight<=0||c.options.minSize[0]&&c.clipBox.offsetWidth<c.options.minSize[0]||c.options.minSize[1]&&c.clipBox.offsetHeight<c.options.minSize[1]?(c.setReset(),c.options.onRelease&&c.options.onRelease()):(c.setHandles(),c.isFunction(c.options.onSelect)&&c.options.onSelect()),document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",e,!1)},!1)}}}return o(e,[{key:"setImage",value:function(e,t){this.disable||(this.options.element.src=e,this.isFunction(t)&&t())}},{key:"setOptions",value:function(e){if(!this.disable)for(var t in this.options)this.options.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=this.options[t])}},{key:"setSelect",value:function(e){if(!this.disable){var t=this.options.aspectRatio,i=Math.abs(e.x2-e.x1),o=t?i/t:Math.abs(e.y2-e.y1),s=e.y1,n=e.x1;e.x1<0||e.x2<0||e.y2<0||e.y1<0||e.x1>this.element.offsetWidth||e.x2>this.element.offsetWidth||e.y1>this.element.offsetHeight||e.y2>this.element.offsetHeight?alert("参数超出范围"):this.options.minSize[0]&&i<this.options.minSize[0]||this.options.minSize[1]&&o<this.options.minSize[1]?alert("设置的宽度或高度小于设置的最小值"):this.options.maxSize[0]&&i>this.options.maxSize[0]||this.options.maxSize[1]&&o>this.options.maxSize[1]?alert("设置的宽度或高度大于设置的最大值"):(e.x2<e.x1&&(n=e.x2),e.y2<e.y1&&(s=e.y2),this.setPos(this.clipBox,{width:i,height:o,left:n,top:s}),this.setBorders(),this.setShadows(),this.setHandles(),this.isFunction(this.options.onSelect)&&this.options.onSelect())}}},{key:"getSelectInfo",value:function(){var e=this.clipBox.offsetWidth,t=this.clipBox.offsetHeight,i=this.clipBox.offsetLeft,o=this.clipBox.offsetTop;return{x1:i,y1:o,x2:i+e,y2:o+t,width:e,height:t}}},{key:"release",value:function(){this.disable||this.setReset()}},{key:"destroy",value:function(){this.disable||this.parentElement&&(this.parentElement.removeChild(this.wrapElement),this.parentElement.innerHTML=this.eleOriginHTML)}},{key:"disable",value:function(){this.disable||(this.disable=!0)}},{key:"enable",value:function(){this.disable&&(this.disable=!1)}},{key:"setBorders",value:function(){var e=this.options.createBorders,t=this.wrapElement.getElementsByClassName("cimage-border")[0];if(this.options.drawBorders&&this.isArray(e)){t.style.display="block";for(var i=0;i<e.length;i++)switch(e[i]){case"n":this.addClass(t,"bd-top");break;case"e":this.addClass(t,"bd-right");break;case"s":this.addClass(t,"bd-bottom");break;case"w":this.addClass(t,"bd-left")}t.style.opacity=this.options.borderOpacity,t.style.boxSizing="border-box";var o={width:this.clipBox.offsetWidth,height:this.clipBox.offsetHeight};this.setPos(t,{width:o.width,height:o.height})}}},{key:"setHandles",value:function(){var e=this.options.createHandles;if(this.isArray(e))for(var t=this.wrapElement.getElementsByClassName("cimage-handle"),i={width:this.clipBox.offsetWidth,height:this.clipBox.offsetHeight},o=0;o<e.length;o++)switch(t[o].style.display="block",t[o].style.opacity=this.handleOpacity,this.setPos(t[o],{width:this.options.handleSize,height:this.options.handleSize}),e[o]){case"n":this.addClass(t[o],"hd-n"),this.setPos(t[o],{left:(i.width-this.options.handleSize)/2,top:-this.options.handleSize/2});break;case"e":this.addClass(t[o],"hd-e"),this.setPos(t[o],{right:-this.options.handleSize/2,top:(i.height-this.options.handleSize)/2});break;case"s":this.addClass(t[o],"hd-s"),this.setPos(t[o],{left:(i.width-this.options.handleSize)/2,bottom:-this.options.handleSize/2});break;case"w":this.addClass(t[o],"hd-w"),this.setPos(t[o],{left:-this.options.handleSize/2,top:(i.height-this.options.handleSize)/2});break;case"ne":this.addClass(t[o],"hd-ne"),this.setPos(t[o],{right:-this.options.handleSize/2,top:-this.options.handleSize/2});break;case"se":this.addClass(t[o],"hd-se"),this.setPos(t[o],{right:-this.options.handleSize/2,bottom:-this.options.handleSize/2});break;case"sw":this.addClass(t[o],"hd-sw"),this.setPos(t[o],{left:-this.options.handleSize/2,bottom:-this.options.handleSize/2});break;case"nw":this.addClass(t[o],"hd-nw"),this.setPos(t[o],{left:-this.options.handleSize/2,top:-this.options.handleSize/2})}}},{key:"setShadows",value:function(){for(var e=this.wrapElement.getElementsByClassName("cimage-shadow"),t={width:this.options.element.offsetWidth,height:this.options.element.offsetHeight},i={width:this.clipBox.offsetWidth,height:this.clipBox.offsetHeight,left:this.clipBox.offsetLeft,top:this.clipBox.offsetTop},o=0;o<e.length;o++)e[o].style.display="block",e[o].style.backgroundColor=this.options.bgColor,e[o].style.opacity=this.options.bgOpacity;this.setPos(e[0],{width:i.width,height:i.top,top:0,left:i.left}),this.setPos(e[1],{width:t.width-i.left-i.width,height:t.height,top:0,right:0}),this.setPos(e[2],{width:i.width,height:t.height-i.top-i.height,bottom:0,left:i.left}),this.setPos(e[3],{width:i.left,height:t.height,top:0,left:0})}},{key:"setPreview",value:function(){if(this.options.hasPreview&&this.options.aspectRatio)for(var e=0;e<this.options.previewSize.length;e++){this.setPos(this.previewBoxs[e],{width:this.options.previewSize[e],height:Math.round(this.options.previewSize[e]/this.options.aspectRatio)});var t=this.previewBoxs[e].offsetWidth/this.clipBox.offsetWidth,i="rect("+this.clipBox.offsetTop*t+"px "+(this.clipBox.offsetLeft+this.clipBox.offsetWidth)*t+"px "+(this.clipBox.offsetTop+this.clipBox.offsetHeight)*t+"px "+this.clipBox.offsetLeft*t+"px)";this.previews[e].style.clip=i,this.setPos(this.previews[e],{top:-this.clipBox.offsetTop*t,left:-this.clipBox.offsetLeft*t,width:this.options.element.offsetWidth*t,height:this.options.element.offsetHeight*t})}}},{key:"setReset",value:function(){for(var e=this.wrapElement.getElementsByClassName("cimage-shadow"),t=this.wrapElement.getElementsByClassName("cimage-handle"),i=0;i<e.length;i++)this.setPos(e[i],{width:0,height:0}),e[i].style.display="none";for(var o=0;o<t.length;o++)t[o].style.display="none";if(this.wrapElement.getElementsByClassName("cimage-border")[0].style.display="none",this.setPos(this.clipBox,{width:0,height:0,left:0,top:0}),this.options.hasPreview&&this.options.aspectRatio)for(var s=0;s<this.options.previewSize.length;s++){this.previews[s].src=this.options.element.src,this.setPos(this.previewBoxs[s],{width:this.options.previewSize[s],height:Math.round(this.options.previewSize[s]/this.options.aspectRatio)});var n="rect(0 "+this.previewBoxs[s].offsetWidth+"px "+this.previewBoxs[s].offsetHeight+"px 0)";this.previews[s].style.clip=n,this.setPos(this.previews[s],{top:0,left:0,width:this.options.element.offsetWidth,height:this.options.element.offsetHeight})}}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"isFunction",value:function(e){return"[object Function]"==Object.prototype.toString.call(e)}},{key:"addClass",value:function(e,t){""==e.className?e.className=t:e.className.split(" ").includes(t)||(e.className+=" "+t)}},{key:"getStyle",value:function(e,t){return e.currentStyle?e.currentStyle[t]:getComputedStyle(e)[t]}},{key:"setPos",value:function(e,t){for(var i in t)e.style[i]=t[i]+"px"}}]),e}();e.exports=s},5:function(e,t){}})});
//# sourceMappingURL=CImage.min.js.map